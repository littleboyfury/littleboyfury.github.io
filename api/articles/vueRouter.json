{"title":"VueRouter 中重定向到动态的 path","uid":"c72fb498b1064492902648005ad6e6d9","slug":"vueRouter","date":"2022-05-12T16:00:00.000Z","updated":"2022-09-28T07:19:23.112Z","comments":true,"path":"api/articles/vueRouter.json","keywords":null,"cover":"https://skyfuryblog.oss-cn-guangzhou.aliyuncs.com/img/1652424063992.png","content":"<h1 id=\"VueRouter\"><a href=\"#VueRouter\" class=\"headerlink\" title=\"VueRouter\"></a>VueRouter</h1><h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>在 vue-router 中，重定向到某个页面采用下面的配置</p>\n<pre class=\"line-numbers language-TypeScript\" data-language=\"TypeScript\"><code class=\"language-TypeScript\">const routes &#x3D; [\n  &#123;\n    path: &#39;&#x2F;test&#39;,\n    redirect: &#39;&#x2F;aaa&#39;,\n  &#125;,\n]</code></pre>\n\n<p>但是如果 redirect 中的路径需要动态生成，由于定义的时候是同步代码，无法直接给 redirect 赋值。</p>\n<pre class=\"line-numbers language-TypeScript\" data-language=\"TypeScript\"><code class=\"language-TypeScript\">async function reqRedirectUrl() &#123;\n  return &#39;&#x2F;aaa&#39;\n&#125;\n\nconst routes &#x3D; [\n  &#123;\n    path: &#39;&#x2F;test&#39;,\n    redirect: &#39;***&#39;,\n  &#125;,\n]</code></pre>\n\n<h2 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h2><p>在定义路由是，使用 beforeEnter 进行拦截，该函数可以定义为 async 函数，<br>里面就可以获取到了动态的路径，再把路径传入到 next 中，实现了动态的重定向</p>\n<pre class=\"line-numbers language-TypeScript\" data-language=\"TypeScript\"><code class=\"language-TypeScript\">async function reqRedirectUrl() &#123;\n  return &#39;&#x2F;aaa&#39;\n&#125;\n\nconst routes &#x3D; [\n  &#123;\n    path: &#39;&#x2F;test&#39;,\n    &#x2F;&#x2F; vue 3 需要加上重定向字段，值随便写\n    &#x2F;&#x2F; redirect: &#39;&#39;,\n    async beforeEnter (to, from, next) &#123;\n      next(await reqRedirectUrl())\n    &#125;\n  &#125;,\n]</code></pre>\n\n","text":"VueRouter背景在 vue-router 中，重定向到某个页面采用下面的配置 const routes &#x3D; [ &#123; path: &#39;&#x2F;test&#39;, redirect: &#39;&#x2F;aaa&#39;, &#125;, ] ...","link":"","photos":[],"count_time":{"symbolsCount":801,"symbolsTime":"1 mins."},"categories":[{"name":"前端","slug":"前端","count":3,"path":"api/categories/前端.json"}],"tags":[{"name":"VUE","slug":"VUE","count":2,"path":"api/tags/VUE.json"},{"name":"VUE_ROUTER","slug":"VUE-ROUTER","count":1,"path":"api/tags/VUE-ROUTER.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#VueRouter\"><span class=\"toc-text\">VueRouter</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">背景</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">解决方案</span></a></li></ol></li></ol>","author":{"name":"SKY","slug":"sky","avatar":"https://cycling-bucket.oss-cn-shenzhen.aliyuncs.com/littleboy/image-20211223171018733.png","link":"/","description":"Welcome to sky home","socials":{"github":"https://github.com/littleboyfury","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_38916811","juejin":"https://juejin.cn/user/2049948533144104","customs":{}}},"mapped":true,"prev_post":{"title":"programming challenge","uid":"f2b153f889628df8257fd406071bc211","slug":"programmingChallenge","date":"2022-05-14T16:00:00.000Z","updated":"2022-09-28T07:19:23.110Z","comments":true,"path":"api/articles/programmingChallenge.json","keywords":null,"cover":"https://skyfuryblog.oss-cn-guangzhou.aliyuncs.com/img/1652684941333.png","text":"编程挑战实现链式调用1&#x2F;&#x2F; 实现 arrange(&#39;William&#39;).wait(5).do(&#39;commit&#39;).wait(5).do(&#39;push&#39;).execute(); class Arrange &#123...","link":"","photos":[],"count_time":{"symbolsCount":"8k","symbolsTime":"7 mins."},"categories":[{"name":"教程","slug":"教程","count":5,"path":"api/categories/教程.json"}],"tags":[{"name":"JAVASCRIPT","slug":"JAVASCRIPT","count":14,"path":"api/tags/JAVASCRIPT.json"}],"author":{"name":"SKY","slug":"sky","avatar":"https://cycling-bucket.oss-cn-shenzhen.aliyuncs.com/littleboy/image-20211223171018733.png","link":"/","description":"Welcome to sky home","socials":{"github":"https://github.com/littleboyfury","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_38916811","juejin":"https://juejin.cn/user/2049948533144104","customs":{}}},"feature":true},"next_post":{"title":"should 问题记录","uid":"1b9460a162c49b16fb160e6d1e730cf3","slug":"should","date":"2022-03-29T16:00:00.000Z","updated":"2022-09-28T07:19:23.111Z","comments":true,"path":"api/articles/should.json","keywords":null,"cover":"https://skyfuryblog.oss-cn-guangzhou.aliyuncs.com/img/1648621531227.png","text":"Should.js 使用问题记录should.extend 方法should 的基本原理就是在 Object.prototype 上定义一个 should 对象，拦截 get，进行特殊处理。 should$1.extend &#x3D; function (propertyNam...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"原理","slug":"原理","count":2,"path":"api/categories/原理.json"}],"tags":[{"name":"JAVASCRIPT","slug":"JAVASCRIPT","count":14,"path":"api/tags/JAVASCRIPT.json"},{"name":"TEST","slug":"TEST","count":1,"path":"api/tags/TEST.json"}],"author":{"name":"SKY","slug":"sky","avatar":"https://cycling-bucket.oss-cn-shenzhen.aliyuncs.com/littleboy/image-20211223171018733.png","link":"/","description":"Welcome to sky home","socials":{"github":"https://github.com/littleboyfury","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_38916811","juejin":"https://juejin.cn/user/2049948533144104","customs":{}}}}}