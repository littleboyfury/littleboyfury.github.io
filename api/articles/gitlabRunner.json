{"title":"gitlab-runner","uid":"8c7191ccbfefacf8736e1c2ac855bf1e","slug":"gitlabRunner","date":"2021-12-17T06:30:00.000Z","updated":"2022-09-28T07:19:23.109Z","comments":true,"path":"api/articles/gitlabRunner.json","keywords":null,"cover":"https://cycling-bucket.oss-cn-shenzhen.aliyuncs.com/littleboy/image-20211217142322091.png","content":"<h1 id=\"gitlab-runner\"><a href=\"#gitlab-runner\" class=\"headerlink\" title=\"gitlab-runner\"></a>gitlab-runner</h1><h2 id=\"mac下安装-gitlab-runner\"><a href=\"#mac下安装-gitlab-runner\" class=\"headerlink\" title=\"mac下安装 gitlab-runner\"></a>mac下安装 gitlab-runner</h2><p>其他系统可以参照官方文档<br><a href=\"https://docs.gitlab.com/runner/install/osx.html\">gitlab runner install</a></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">brew install gitlab-runner\n\nbrew services start gitlab-runner</code></pre>\n\n<h2 id=\"gitlab-ci-yml\"><a href=\"#gitlab-ci-yml\" class=\"headerlink\" title=\".gitlab-ci.yml\"></a>.gitlab-ci.yml</h2><p>node 项目示例</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">image: 3jbq95i3.mirror.aliyuncs.com&#x2F;library&#x2F;node:14-alpine\n\nstages:\n  - test\n\ntest:\n  stage: test\n  ## 环境变量，可以通过 process.env.变量名 获取\n  variables:\n    TZ: &#39;Asia&#x2F;Shanghai&#39;\n    # mongo 作为依赖的连接 host\n    MONGODB: &#39;mongodb:&#x2F;&#x2F;mongo&#x2F;test&#39;\n    # redis 作为依赖的连接的 host\n    REDIS_HOST: redis\n  services:\n    # 依赖 mongo\n    - mongo:4.2\n    # 依赖 redis\n    - redis:latest\n    # 或者可以使用别名\n    # - name: mongo:4.2\n    #   alias: mongo111\n\n  script:\n    - npm config set registry &#39;https:&#x2F;&#x2F;registry.npm.taobao.org&#39;\n    - npm install\n    # 项目中的测试命令\n    - npm run ci</code></pre>\n\n<h2 id=\"本地运行-CI\"><a href=\"#本地运行-CI\" class=\"headerlink\" title=\"本地运行 CI\"></a>本地运行 CI</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># --docker-pull-policy&#x3D;never 可以在 .gitlab-ci.yml 中使用本地镜像，test 需要执行的名称\ngitlab-runner exec docker --docker-pull-policy&#x3D;never test</code></pre>\n","text":"gitlab-runnermac下安装 gitlab-runner其他系统可以参照官方文档gitlab runner install brew install gitlab-runner brew services start gitlab-runner .gitlab-ci.y...","link":"","photos":[],"count_time":{"symbolsCount":906,"symbolsTime":"1 mins."},"categories":[{"name":"教程","slug":"教程","count":5,"path":"api/categories/教程.json"}],"tags":[{"name":"GITLAB","slug":"GITLAB","count":1,"path":"api/tags/GITLAB.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#gitlab-runner\"><span class=\"toc-text\">gitlab-runner</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#mac%E4%B8%8B%E5%AE%89%E8%A3%85-gitlab-runner\"><span class=\"toc-text\">mac下安装 gitlab-runner</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gitlab-ci-yml\"><span class=\"toc-text\">.gitlab-ci.yml</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%AC%E5%9C%B0%E8%BF%90%E8%A1%8C-CI\"><span class=\"toc-text\">本地运行 CI</span></a></li></ol></li></ol>","author":{"name":"SKY","slug":"sky","avatar":"https://cycling-bucket.oss-cn-shenzhen.aliyuncs.com/littleboy/image-20211223171018733.png","link":"/","description":"Welcome to sky home","socials":{"github":"https://github.com/littleboyfury","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_38916811","juejin":"https://juejin.cn/user/2049948533144104","customs":{}}},"mapped":true,"prev_post":{"title":"egg-bull-board-adapter","uid":"985a6e9f306f90ab989025adc0137572","slug":"eggBullBoardAdapter","date":"2021-12-17T10:30:00.000Z","updated":"2022-09-28T07:19:23.108Z","comments":true,"path":"api/articles/eggBullBoardAdapter.json","keywords":null,"cover":"https://cycling-bucket.oss-cn-shenzhen.aliyuncs.com/littleboy/image-20211217181813598.png","text":"egg-bull-board-adapteregg-bull-board 产生原因egg.js 中不能直接使用 @bull-board/koa 中的 KoaAdapter &#x2F;&#x2F; bull-board&#x2F;packages&#x2F;koa&#x2F;sr...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"后端","slug":"后端","count":2,"path":"api/categories/后端.json"}],"tags":[{"name":"JAVASCRIPT","slug":"JAVASCRIPT","count":14,"path":"api/tags/JAVASCRIPT.json"},{"name":"TYPESCRIPT","slug":"TYPESCRIPT","count":5,"path":"api/tags/TYPESCRIPT.json"},{"name":"EGGJS","slug":"EGGJS","count":1,"path":"api/tags/EGGJS.json"},{"name":"BULL-BOARD","slug":"BULL-BOARD","count":1,"path":"api/tags/BULL-BOARD.json"},{"name":"BULLJS","slug":"BULLJS","count":1,"path":"api/tags/BULLJS.json"}],"author":{"name":"SKY","slug":"sky","avatar":"https://cycling-bucket.oss-cn-shenzhen.aliyuncs.com/littleboy/image-20211223171018733.png","link":"/","description":"Welcome to sky home","socials":{"github":"https://github.com/littleboyfury","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_38916811","juejin":"https://juejin.cn/user/2049948533144104","customs":{}}}},"next_post":{"title":"Promise 简写","uid":"66f57e202e85c56083a0db8b6aa3f2f8","slug":"promise","date":"2021-12-15T15:00:00.000Z","updated":"2022-09-28T07:19:23.111Z","comments":true,"path":"api/articles/promise.json","keywords":null,"cover":"https://cycling-bucket.oss-cn-shenzhen.aliyuncs.com/littleboy/image-20211212224316297.png","text":"MyPromise&#x2F;&#x2F; 状态状态 const PENDING &#x3D; &#39;PENDING&#39; &#x2F;&#x2F; 成功状态 const FULFILLED &#x3D; &#39;FULFILLED&#39; &#x2F;&#x2F; ...","link":"","photos":[],"count_time":{"symbolsCount":"7.3k","symbolsTime":"7 mins."},"categories":[{"name":"JavaScript","slug":"JavaScript","count":9,"path":"api/categories/JavaScript.json"}],"tags":[{"name":"JAVASCRIPT","slug":"JAVASCRIPT","count":14,"path":"api/tags/JAVASCRIPT.json"}],"author":{"name":"SKY","slug":"sky","avatar":"https://cycling-bucket.oss-cn-shenzhen.aliyuncs.com/littleboy/image-20211223171018733.png","link":"/","description":"Welcome to sky home","socials":{"github":"https://github.com/littleboyfury","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_38916811","juejin":"https://juejin.cn/user/2049948533144104","customs":{}}}}}